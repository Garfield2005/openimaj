<!DOCTYPE html><html xmlns:d="http://docbook.org/ns/docbook" xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Chapter&nbsp;4.&nbsp;Global image features</title>
      <link rel="stylesheet" type="text/css" href="css/apache-maven-fluido-1.3.0.min.css">
      <link rel="stylesheet" type="text/css" href="css/stylesheet.css">
      <link rel="stylesheet" type="text/css" href="fonts/fonts.css">
      <meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1">
      <link rel="home" href="index.html" title="The OpenIMAJ Tutorial">
      <link rel="up" href="pt02.html" title="Part&nbsp;II.&nbsp;Image Fundamentals">
      <link rel="prev" href="introduction-to-clustering-segmentation-and-connected-components.html" title="Chapter&nbsp;3.&nbsp;Introduction to clustering, segmentation and connected components">
      <link rel="next" href="sift-and-feature-matching.html" title="Chapter&nbsp;5.&nbsp;SIFT and feature matching">
      <meta property="fb:admins" content="286108206">
      <meta property="og:type" content="website">
      <link rel="image_src" href="../images/OpenImaj-sq.png">
      <meta property="og:image" content="http://openimaj.org/images/OpenImaj-sq.png">
      <meta property="og:title" content="OpenIMAJ: Open Intelligent Multimedia Analysis">
      <meta property="og:url" content="http://www.openimaj.org">
      <meta property="og:description" content="OpenIMAJ is an award-winning set of libraries and tools for multimedia content analysis and content generation."><script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script><script type="text/javascript">
	      var _gaq = _gaq || [];
	      _gaq.push(['_setAccount', 'UA-38338744-1']);
	      _gaq.push(['_trackPageview']);

	      (function() {
	        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	      })();
	    </script></head>
   <body class="topBarEnabled">
      <div id="topbar" class="navbar navbar-fixed-top navbar-inverse">
         <div class="navbar-inner">
            <div class="container">
               <div class="nav-collapse"><a class="brand" href="../index.html" title="OpenIMAJ"><img src="images/logo-tiny.png" alt="OpenIMAJ"></a><ul class="nav">
                     <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a><ul class="dropdown-menu">
                           <li><a href="../index.html" title="Introduction">Introduction</a></li>
                           <li><a href="../sponsors.html" title="History &amp; Sponsors">History &amp; Sponsors</a></li>
                           <li><a href="../contact.html" title="Support &amp; Contacts">Support &amp; Contacts</a></li>
                           <li><a href="team.html" title="Team">Team</a></li>
                           <li><a href="http://blogs.ecs.soton.ac.uk/multimedia" title="The Blog">The Blog</a></li>
                           <li><a href="http://www.sf.net/p/openimaj/code" title="Source Code">Source Code</a></li>
                           <li class="dropdown-submenu"><a href="../#related" title="Related Projects">Related Projects</a><ul class="dropdown-menu">
                                 <li><a href="http://www.imageterrier.org/" title="ImageTerrier">ImageTerrier</a></li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                     <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a><ul class="dropdown-menu">
                           <li class="dropdown-submenu"><a href="../#gettingstarted" title="Getting Started">Getting Started</a><ul class="dropdown-menu">
                                 <li><a href="../tutorial-pdf.pdf" title="The Tutorial (PDF)">The Tutorial (PDF)</a></li>
                                 <li><a href="../tutorial/index.html" title="The Tutorial (HTML)">The Tutorial (HTML)</a></li>
                              </ul>
                           </li>
                           <li class="dropdown-submenu"><a href="../#using" title="Using OpenIMAJ">Using OpenIMAJ</a><ul class="dropdown-menu">
                                 <li><a href="../BuildFromSource.html" title="Building OpenIMAJ from Source">Building OpenIMAJ from Source</a></li>
                                 <li><a href="../UseLibrary.html" title="Using OpenIMAJ as a Library">Using OpenIMAJ as a Library</a></li>
                                 <li><a href="../Groovy.html" title="Using OpenIMAJ with Groovy">Using OpenIMAJ with Groovy</a></li>
                                 <li><a href="../tools.html" title="OpenIMAJ commandline tools introduction">OpenIMAJ commandline tools introduction</a></li>
                                 <li><a href="../flickrCrawler.html" title="The FlickrCrawler Tool">The FlickrCrawler Tool</a></li>
                                 <li><a href="../bibliography.html" title="Bibliography">Bibliography</a></li>
                              </ul>
                           </li>
                           <li><a href="../apidocs/index.html" title="API Reference">API Reference</a></li>
                           <li class="dropdown-submenu"><a href="#info" title="Project Information">Project Information</a><ul class="dropdown-menu">
                                 <li><a href="../plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                                 <li><a href="../mail-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                                 <li><a href="../integration.html" title="Continuous Integration">Continuous Integration</a></li>
                                 <li><a href="../license.html" title="Project License">Project License</a></li>
                                 <li><a href="../team-list.html" title="Project Team">Project Team</a></li>
                                 <li><a href="../source-repository.html" title="Source Repository">Source Repository</a></li>
                                 <li><a href="../index.html" title="About">About</a></li>
                                 <li><a href="../issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
                                 <li><a href="../project-summary.html" title="Project Summary">Project Summary</a></li>
                                 <li><a href="../plugins.html" title="Project Plugins">Project Plugins</a></li>
                                 <li><a href="../dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                                 <li><a href="../dependencies.html" title="Dependencies">Dependencies</a></li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                     <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a><ul class="dropdown-menu">
                           <li><a href="/openimaj-maven-archetypes/index.html" title="OpenIMAJ Maven Archetypes">OpenIMAJ Maven Archetypes</a></li>
                           <li><a href="/openimaj-core-libs/index.html" title="OpenIMAJ Core Libraries">OpenIMAJ Core Libraries</a></li>
                           <li><a href="/openimaj-image/index.html" title="OpenIMAJ Image Processing Libraries">OpenIMAJ Image Processing Libraries</a></li>
                           <li><a href="/openimaj-video/index.html" title="OpenIMAJ Video Processing Libraries">OpenIMAJ Video Processing Libraries</a></li>
                           <li><a href="/openimaj-audio/index.html" title="OpenIMAJ Audio Processing Libraries">OpenIMAJ Audio Processing Libraries</a></li>
                           <li><a href="/openimaj-machine-learning/index.html" title="OpenIMAJ Machine Learning Subprojects">OpenIMAJ Machine Learning Subprojects</a></li>
                           <li><a href="/openimaj-text/index.html" title="OpenIMAJ Text Analysis Subprojects">OpenIMAJ Text Analysis Subprojects</a></li>
                           <li><a href="/thirdparty/index.html" title="OpenIMAJ Third Party Ported Libraries">OpenIMAJ Third Party Ported Libraries</a></li>
                           <li><a href="/openimaj-demos/index.html" title="OpenIMAJ Demos Subproject">OpenIMAJ Demos Subproject</a></li>
                           <li><a href="/openimaj-knowledge/index.html" title="OpenIMAJ Knowledge Representation and Reasoning Libraries">OpenIMAJ Knowledge Representation and Reasoning Libraries</a></li>
                           <li><a href="/test-resources/index.html" title="OpenIMAJ Unit Test Resources">OpenIMAJ Unit Test Resources</a></li>
                           <li><a href="/openimaj-tools/index.html" title="OpenIMAJ Tools">OpenIMAJ Tools</a></li>
                           <li><a href="/openimaj-hadoop/index.html" title="OpenIMAJ Hadoop Subproject">OpenIMAJ Hadoop Subproject</a></li>
                           <li><a href="/openimaj-storm/index.html" title="OpenIMAJ Storm Subproject">OpenIMAJ Storm Subproject</a></li>
                           <li><a href="/openimaj-web/index.html" title="OpenIMAJ web subproject">OpenIMAJ web subproject</a></li>
                           <li><a href="/openimaj-hardware/index.html" title="OpenIMAJ Hardware Subprojects">OpenIMAJ Hardware Subprojects</a></li>
                           <li><a href="/openimaj-content-libs/index.html" title="OpenIMAJ Content Creation Libraries">OpenIMAJ Content Creation Libraries</a></li>
                           <li><a href="/openimaj-ide-integration/index.html" title="OpenIMAJ IDE Integration Plugins">OpenIMAJ IDE Integration Plugins</a></li>
                           <li><a href="/openimaj-documentation/index.html" title="OpenIMAJ Documentation">OpenIMAJ Documentation</a></li>
                        </ul>
                     </li>
                  </ul>
                  <form id="search-form" action="http://www.google.com/search" method="get" class="navbar-search pull-right" name="search-form"><input value="" name="sitesearch" type="hidden"><input class="search-query" name="q" id="query" type="text"></form><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script><iframe src="http://www.facebook.com/plugins/like.php?href=http://www.openimaj.org/&amp;send=false&amp;layout=button_count&amp;show-faces=false&amp;action=like&amp;colorscheme=dark" scrolling="no" frameborder="0" style="border:none; width:80px; height:20px; margin-top: 10px;" class="pull-right"></iframe><script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script><ul class="nav pull-right">
                     <li style="margin-top: 10px;">
                        <div class="g-plusone" data-href="http://www.openimaj.org/" data-size="medium" width="60px" align="right"></div>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </div>
      <div class="container">
         <div id="banner">
            <div class="pull-left">
               <div id="bannerLeft">
                  <h2>OpenIMAJ</h2>
               </div>
            </div>
            <div class="pull-right"></div>
            <div class="clear">
               <hr>
            </div>
         </div>
         <div id="breadcrumbs">
            <ul class="breadcrumb">
               <li id="publishDate" class="pull-right">Last Published: 2015-02-25</li>
               <li class="divider pull-right">|</li>
               <li id="projectVersion" class="pull-right">Version: 1.4-SNAPSHOT</li>
            </ul>
         </div>
         <div id="nav-sub-block"><a class="hide" name="nav-sub-a"></a><ul id="nav-sub">
               <li class="first"><a accesskey="p" href="introduction-to-clustering-segmentation-and-connected-components.html"><span>Prev : Introduction to clustering, segmentation and connected components</span></a></li>
               <li><a accesskey="h" href="index.html"><span>Contents</span></a></li>
               <li class="last"><a accesskey="n" href="sift-and-feature-matching.html"><span>Next : SIFT and feature matching</span></a></li>
            </ul>
         </div>
         <div class="chapter" title="Chapter&nbsp;4.&nbsp;Global image features">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="global-image-features"></a>Chapter&nbsp;4.&nbsp;Global image features
                     </h2>
                  </div>
               </div>
            </div>
              
              
            <p>
                   The task in this tutorial is to understand how we can extract
                   numerical representations from images and how these numerical
                   representations can be used to provide similarity measures between
                   images, so that we can, for example, find the most similar images
                   from a set.
                 
            </p>
              
            <p>
                   As you know, images are made up of pixels which are basically
                   numbers that represent a colour. This is the most basic form of
                   numerical representation of an image. However, we can do
                   calculations on the pixel values to get other numerical
                   representations that mean different things. In general, these
                   numerical representations are known as
                   <span class="strong"><strong>feature vectors</strong></span> and they
                   represent particular <span class="strong"><strong>features</strong></span>.
                 
            </p>
              
            <p>
                   Let&#8217;s take a very common and easily understood type of feature. It&#8217;s
                   called a colour histogram and it basically tells you the proportion
                   of different colours within an image (e.g. 90% red, 5% green, 3%
                   orange, and 2% blue). As pixels are represented by different amounts
                   of red, green and blue we can take these values and accumulate them
                   in our histogram (e.g. when we see a red pixel we add 1 to our
                   <span class="quote">&#8220;<span class="quote">red pixel count</span>&#8221;</span> in the histogram).
                 
            </p>
              
            <p>
                   A histogram can accrue counts for any number of colours in any
                   number of dimensions but the usual is to split the red, green and
                   blue values of a pixel into a smallish number of <span class="quote">&#8220;<span class="quote">bins</span>&#8221;</span>
                   into which the colours are thrown. This gives us a three-dimensional
                   cube, where each small cubic bin is accruing counts for that colour.
                 
            </p>
              
            <p>
                   OpenIMAJ contains a multidimensional <code class="code">MultidimensionalHistogram</code>
                   implementation that is constructed using the number of bins required
                   in each dimension. For example:
                 
            </p>
              <pre class="programlisting">MultidimensionalHistogram histogram = new MultidimensionalHistogram( 4, 4, 4 );</pre>
              <p>
                   This code creates a histogram that has 64 (4&#8197;&times;&#8197;4&#8197;&times;&#8197;4) bins. However,
                   this data structure does not do anything on its own. The
                   <code class="code">HistogramModel</code> class provides a means for
                   creating a <code class="code">MultidimensionalHistogram</code> from an image. The
                   <code class="code">HistogramModel</code> class assumes the image has been
                   normalised and returns a normalised histogram:
                 
            </p>
              <pre class="programlisting">HistogramModel model = new HistogramModel( 4, 4, 4 );
model.estimateModel( image );
MultidimensionalHistogram histogram = model.histogram;</pre>
              <p>
                   You can print out the histogram to see what sort of numbers you get
                   for different images. Note that the you can re-use the <code class="code">HistogramModel</code> by applying it 
               		to different images. If you do reuse the <code class="code">HistogramModel</code> the 
               		<code class="code">model.histogram</code> will be the same object, so you'll need to <code class="code">clone()</code> 
               		it if you need to keep hold of its values for multiple images. Let&#8217;s load in 3 
               		images then generate and store the histograms for them:
                 
            </p>
              <pre class="programlisting">URL[] imageURLs = new URL[] {
   new URL( "http://users.ecs.soton.ac.uk/dpd/projects/openimaj/tutorial/hist1.jpg" ),
   new URL( "http://users.ecs.soton.ac.uk/dpd/projects/openimaj/tutorial/hist2.jpg" ), 
   new  URL( "http://users.ecs.soton.ac.uk/dpd/projects/openimaj/tutorial/hist3.jpg" ) 
};

List&lt;MultidimensionalHistogram&gt; histograms = new ArrayList&lt;MultidimensionalHistogram&gt;();
HistogramModel model = new HistogramModel(4, 4, 4);

for( URL u : imageURLs ) {
    model.estimateModel(ImageUtilities.readMBF(u));
    histograms.add( model.histogram.clone() );
}</pre>
            
            <p class="centered">
               	<span class="inlinemediaobject"><img src="figs/hist1.jpg" align="middle" width="177.16535433070868"></span>
               
               	<span class="inlinemediaobject"><img src="figs/hist2.jpg" align="middle" width="177.16535433070868"></span>
               	
               	<span class="inlinemediaobject"><img src="figs/hist3.jpg" align="middle" width="177.16535433070868"></span>
               
            </p>
            
              
            <p>
                   We now have a list of histograms from our images. The
                   <code class="code">Histogram</code> class extends a class called the
                   <code class="code">MultidimensionalDoubleFV</code> which is a feature
                   vector represented by multidimensional set of double precision
                   numbers. This class provides us with a <code class="code">compare()</code>
                   method which allows comparison between two multidimensional sets of
                   doubles. This method takes the other feature vector to compare
                   against and a comparison method which is implemented in the
                   <code class="code">DoubleFVComparison</code> class.
                 
            </p>
              
            <p>
                   So, we can compare two histograms using the Euclidean distance
                   measure like so:
                 
            </p>
              <pre class="programlisting">double distanceScore = histogram1.compare( histogram2, DoubleFVComparison.EUCLIDEAN );</pre>
              <p>
                   This will give us a score of how similar (or dissimilar) the
                   histograms are. It&#8217;s useful to think of the output score as a
                   <span class="strong"><strong>distance</strong></span> apart in space. Two very
                   similar histograms will be very close together so have a small
                   distance score, whereas two dissimilar histograms will be far apart
                   and so have a large distance score.
                 
            </p>
              
            <p>
                   The Euclidean distance measure is symmetric (that is, if you compare
                   <code class="code">histogram1</code> to <code class="code">histogram2</code> you
                   will get the same score if you compare <code class="code">histogram2</code>
                   to <code class="code">histogram1</code>) so we can compare all the
                   histograms with each other in a simple, efficient, nested loop:
                 
            </p>
              <pre class="programlisting">for( int i = 0; i &lt; histograms.size(); i++ ) {
    for( int j = i; j &lt; histograms.size(); j++ ) {
        double distance = histograms.get(i).compare( histograms.get(j), DoubleFVComparison.EUCLIDEAN );
    }
}</pre>
              <div class="sect1" title="4.1.&nbsp;Exercises">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="exercises-5"></a>4.1.&nbsp;Exercises
                        </h2>
                     </div>
                  </div>
               </div>
                   
                   
               <div class="sect2" title="4.1.1.&nbsp;Exercise 1: Finding and displaying similar images">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="exercise-1-finding-and-displaying-similar-images"></a>4.1.1.&nbsp;Exercise 1: Finding and displaying similar images
                           </h3>
                        </div>
                     </div>
                  </div>
                        
                        
                  <p>
                             Which images are most similar? Does that match with what you
                             expect if you look at the images? Can you make the application
                             display the two most similar images that are not the same?
                           
                  </p>
                      
               </div>
                   
               <div class="sect2" title="4.1.2.&nbsp;Exercise 2: Exploring comparison measures">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="exercise-2-exploring-comparison-measures"></a>4.1.2.&nbsp;Exercise 2: Exploring comparison measures
                           </h3>
                        </div>
                     </div>
                  </div>
                        
                        
                  <p>
                             What happens when you use a different comparison measure (such
                             as <code class="code">DoubleFVComparison.INTERSECTION</code>)?
                           
                  </p>
                      
               </div>
                 
            </div>
            
         </div>
      </div>
      <div id="nav-sub-block" class="bottom"><a class="hide" name="nav-sub-a"></a><ul id="nav-sub">
            <li class="first"><a accesskey="p" href="introduction-to-clustering-segmentation-and-connected-components.html"><span>Prev : Introduction to clustering, segmentation and connected components</span></a></li>
            <li><a accesskey="h" href="index.html"><span>Contents</span></a></li>
            <li class="last"><a accesskey="n" href="sift-and-feature-matching.html"><span>Next : SIFT and feature matching</span></a></li>
         </ul>
      </div>
      <footer>
         <div class="container">
            <div class="row span12">Copyright &copy; 2011-2014 <a href="http://www.soton.ac.uk">The University of Southampton</a>. All Rights Reserved.
                 				
            </div>
            <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png"></a></p>
            <div id="ohloh" class="pull-right"><script type="text/javascript" src="http://www.ohloh.net/p/openimaj/widgets/project_partner_badge.js"></script></div>
         </div>
      </footer>
   </body>
</html>